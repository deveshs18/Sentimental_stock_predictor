2025-06-19 00:07:12,142 - __main__ - INFO - Loading data files for LLM context preparation...
2025-06-19 00:07:12,151 - __main__ - INFO - All data files loaded successfully (or handled if missing).
2025-06-19 00:07:12,167 - __main__ - INFO - Filtering and selecting top companies...
2025-06-19 00:07:12,169 - __main__ - INFO - Selected 2 top companies for LLM context.
2025-06-19 00:07:12,177 - __main__ - WARNING - 'market_sentiment' column not found in /app/scripts/../data/predict_growth.csv.
2025-06-19 00:07:12,177 - __main__ - INFO - Overall market sentiment for LLM context: Data not available
2025-06-19 00:07:12,177 - __main__ - INFO - Main test: Overall market sentiment: Data not available
2025-06-19 00:07:12,177 - __main__ - INFO - Using sample user query: "Which stocks are looking good today based on sentiment and growth potential?"
2025-06-19 00:07:12,178 - __main__ - INFO - Generated Dynamic Prompt:
2025-06-19 00:07:12,179 - __main__ - INFO - You are a stock analyst assistant. Analyze the provided company data in the context of the user's query and the stated overall market sentiment.

User Query: "Which stocks are looking good today based on sentiment and growth potential?"

Overall Market Sentiment: Data not available

Company Data Context:
- Microsoft: Positive Sentiment=3.00, Neutral Sentiment=0.00, Negative Sentiment=1.00, GrowthScore=0.37, MacroSentiment=0.00, Sector=Information Technology, LSTM Next Day Close: $354.32
- Nvidia: Positive Sentiment=1.00, Neutral Sentiment=1.00, Negative Sentiment=0.00, GrowthScore=0.26, MacroSentiment=0.00, Sector=Information Technology

---

Instructions:
Your primary role is to answer the user's query using ONLY the provided 'Company Data Context'. Adhere to the following guidelines strictly:
- If the user asks for a prediction (e.g., 'which stock will go up/down?', 'what might happen next?'), base your prediction or inference exclusively on the trends, sentiment (positive, neutral, negative scores), GrowthScore, and MacroSentiment visible in the 'Company Data Context'.
- When making such an inference, clearly state that your analysis is derived from this specific dataset and its current indicators. For example, start your explanation with 'Based on the provided data (GrowthScore, sentiment)...' or similar phrasing.
- Do NOT use any external knowledge or information outside of the 'Company Data Context' to make predictions or analyses.
- Do NOT refuse to make a prediction or inference if the user is asking for one. Instead, make the best possible interpretation grounded in the provided data, even if the data is limited.
- If the query is about specific companies, focus your analysis on them if they are present in the 'Company Data Context'. If they are not listed, state that they are not in the current analysis dataset.
- If the 'Company Data Context' is empty, you MUST inform the user that no specific company data is available from the latest pipeline run to answer the query and that you cannot perform the requested analysis without it.
2025-06-19 00:07:12,179 - __main__ - WARNING - OPENAI_API_KEY not found. Skipping OpenAI API call and output file generation.
